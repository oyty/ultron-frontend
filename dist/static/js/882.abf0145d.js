/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-08-22 16:46:40
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[882,8501],{53767:function(e,a,t){t.d(a,{Ed:function(){return o},ML:function(){return r},pL:function(){return n},vS:function(){return u}});var l=t(80484);function u(e){return(0,l.A)({url:"/company/getList",method:"get",params:e})}function r(){return(0,l.A)({url:"/company/getNodes",method:"get"})}function o(e){return(0,l.A)({url:"/company/doEdit",method:"post",data:e})}function n(e){return(0,l.A)({url:"/company/doDelete",method:"post",data:e})}},30345:function(e,a,t){t.d(a,{Ed:function(){return o},pL:function(){return n},vS:function(){return u},wN:function(){return r}});var l=t(80484);function u(e){return(0,l.A)({url:"/role/getList",method:"get",params:e})}function r(){return(0,l.A)({url:"/role/getNodes",method:"get"})}function o(e){return(0,l.A)({url:"/role/doEdit",method:"post",data:e})}function n(e){return(0,l.A)({url:"/role/doDelete",method:"post",data:e})}},70870:function(e,a,t){t.d(a,{Ed:function(){return r},pL:function(){return o},vS:function(){return u}});var l=t(80484);function u(e){return(0,l.A)({url:"/user/getList",method:"get",params:e})}function r(e){return(0,l.A)({url:"/user/doEdit",method:"post",data:e})}function o(e){return(0,l.A)({url:"/user/doDelete",method:"post",data:e})}},68501:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var l=t(72638),u=(t(25638),t(56197),t(24707)),r=(t(91697),t(29313)),o=(t(11501),t(52659)),n=(t(61141),t(5881),t(12118),t(35084)),d=(t(70752),t(57305)),s=t(70817),i=t(70870),m=t(53767),c=t(30345),p={__name:"UserManagementEdit",emits:["fetch-data"],setup(e,{expose:a,emit:t}){const p=t,f=(0,d.WQ)("$baseMessage"),b=(0,s.KR)(null),v=(0,s.Kh)({id:"",username:"",password:"",company_id:"",role_id:"",remark:""}),_=(0,s.KR)([]),g=(0,s.KR)([]),h=(0,s.KR)(""),k=(0,s.KR)(!1),y=(0,s.Kh)({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],company_id:[{required:!0,trigger:"blur",message:"请关联数据权限"}],role_id:[{required:!0,trigger:"blur",message:"请选择角色"}]}),w=async e=>{e?(h.value="编辑",Object.assign(v,e)):h.value="添加",k.value=!0,await V(),await F()};async function V(){const{data:e}=await(0,m.ML)();_.value=e}async function F(){const{data:e}=await(0,c.wN)();g.value=e}const E=()=>{b.value.resetFields(),v.id="",v.username="",v.password="",v.company_id="",v.role_id="",v.remark="",k.value=!1},A=()=>{b.value.validate((async e=>{if(e){const{msg:e}=await(0,i.Ed)(v);f(e,"success","vab-hey-message-success"),p("fetch-data"),E()}}))};return a({showEdit:w}),(e,a)=>{const t=n.WK,s=r.xE,i=o.P9,m=o.AV,c=r.US,p=u.S2,f=l.kZ;return(0,d.uX)(),(0,d.Wv)(f,{modelValue:k.value,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value=e),title:h.value,width:"500px",onClose:E},{footer:(0,d.k6)((()=>[(0,d.bF)(p,{onClick:E},{default:(0,d.k6)((()=>[(0,d.eW)("取 消")])),_:1}),(0,d.bF)(p,{type:"primary",onClick:A},{default:(0,d.k6)((()=>[(0,d.eW)("确 定")])),_:1})])),default:(0,d.k6)((()=>[(0,d.bF)(c,{ref_key:"formRef",ref:b,"label-width":"80px",model:v,rules:y},{default:(0,d.k6)((()=>[(0,d.bF)(s,{label:"用户名",prop:"username"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:v.username,"onUpdate:modelValue":a[0]||(a[0]=e=>v.username=e),modelModifiers:{trim:!0},placeholder:"输入用户名"},null,8,["modelValue"])])),_:1}),(0,d.bF)(s,{label:"密码",prop:"password"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:v.password,"onUpdate:modelValue":a[1]||(a[1]=e=>v.password=e),modelModifiers:{trim:!0},placeholder:"输入密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,d.bF)(s,{label:"数据权限",prop:"company_id"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:v.company_id,"onUpdate:modelValue":a[2]||(a[2]=e=>v.company_id=e),clearable:"",filterable:"",placeholder:"请选择",style:{width:"100%"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(_.value,(e=>((0,d.uX)(),(0,d.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,d.bF)(s,{label:"角色",prop:"role_id"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:v.role_id,"onUpdate:modelValue":a[3]||(a[3]=e=>v.role_id=e),clearable:"",placeholder:"请选择",style:{width:"100%"}},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(g.value,(e=>((0,d.uX)(),(0,d.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,d.bF)(s,{class:"form-item",label:"备注",prop:"remark"},{default:(0,d.k6)((()=>[(0,d.bF)(t,{modelValue:v.remark,"onUpdate:modelValue":a[4]||(a[4]=e=>v.remark=e),autosize:{minRows:3,maxRows:4},placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])}}};function f(e){e.__source="src/views/setting/user/components/UserManagementEdit.vue"}"function"===typeof f&&f(p);const b=p;var v=b}}]);