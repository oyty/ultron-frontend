/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-08-21 17:45:49
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7938],{53767:function(e,a,t){t.d(a,{Ed:function(){return i},ML:function(){return n},pL:function(){return r},vS:function(){return o}});var l=t(80484);function o(e){return(0,l.A)({url:"/company/getList",method:"get",params:e})}function n(){return(0,l.A)({url:"/company/getNodes",method:"get"})}function i(e){return(0,l.A)({url:"/company/doEdit",method:"post",data:e})}function r(e){return(0,l.A)({url:"/company/doDelete",method:"post",data:e})}},57938:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var l=t(72638),o=(t(25638),t(56197),t(24707)),n=(t(91697),t(29313)),i=(t(11501),t(12118),t(52659)),r=(t(61141),t(5881),t(57305));function d(e,a,t,d,u,s){const c=i.P9,m=i.AV,f=n.xE,p=n.US,v=o.S2,b=l.kZ;return(0,r.uX)(),(0,r.Wv)(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogFormVisible=a),title:e.title,width:"500px",onClose:e.close},{footer:(0,r.k6)((()=>[(0,r.bF)(v,{onClick:e.close},{default:(0,r.k6)((()=>[(0,r.eW)("取 消")])),_:1},8,["onClick"]),(0,r.bF)(v,{type:"primary",onClick:e.save},{default:(0,r.k6)((()=>[(0,r.eW)("确 定")])),_:1},8,["onClick"])])),default:(0,r.k6)((()=>[(0,r.bF)(p,{ref:"formRef","label-width":"80px",model:e.form,rules:e.rules},{default:(0,r.k6)((()=>[(0,r.bF)(f,{label:"选择单位",prop:"company_id"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{modelValue:e.form.company_id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.company_id=a),clearable:"",filterable:"",placeholder:"请选择",style:{width:"100%"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.companyNodes,(e=>((0,r.uX)(),(0,r.Wv)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(f,{label:"选择设备",prop:"device_id"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{modelValue:e.form.device_id,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.device_id=a),clearable:"",filterable:"",placeholder:"请选择",style:{width:"100%"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.deviceNodes,(e=>((0,r.uX)(),(0,r.Wv)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","onClose"])}t(53767);var u=t(80484);function s(e){return(0,u.A)({url:"/company/getNodes",method:"get",params:e})}function c(e){return(0,u.A)({url:"/device/unbindNodes",method:"get",params:e})}function m(e){return(0,u.A)({url:"/bind/doEdit",method:"post",data:e})}var f=t(70817),p=(0,r.pM)({name:"RoleManagementEdit",emits:["fetch-data"],setup(e,{emit:a}){const t=(0,r.WQ)("$baseMessage"),l=(0,f.Kh)({formRef:null,treeRef:null,form:{id:"",device_id:"",company_id:""},rules:{company_id:[{required:!0,trigger:"blur",message:"请选择单位"}],device_id:[{required:!0,trigger:"blur",message:"请选择设备"}]},title:"",companyNodes:[],deviceNodes:[],dialogFormVisible:!1,list:[]}),o=async e=>{e?(l.title="编辑",l.form=JSON.parse(JSON.stringify(e))):l.title="添加",l.dialogFormVisible=!0,await i(),await d()},n=async()=>{l["formRef"].resetFields(),l.form={name:"",remark:""},l.dialogFormVisible=!1};async function i(){const{data:e}=await s();l.companyNodes=e}async function d(){const{data:e}=await c();l.deviceNodes=e}const u=()=>{l["formRef"].validate((async e=>{if(e){const{msg:e}=await m({...l.form});t(e,"success","vab-hey-message-success"),a("fetch-data"),n()}}))};return{...(0,f.QW)(l),showEdit:o,close:n,save:u}}});function v(e){e.__source="src/views/setting/link/components/LinkEdit.vue"}var b=t(88093);"function"===typeof v&&v(p);const y=(0,b.A)(p,[["render",d],["__scopeId","data-v-a27a5a5e"]]);var g=y}}]);